<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>InstaPro.ai ‚Äî Seu Instagram Profissional no Piloto Autom√°tico</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg:#0a0a0f; --surface:#13131a; --surface2:#1c1c27;
      --border:rgba(255,255,255,0.07); --accent:#7c5cfc; --accent2:#fc5c7d;
      --accent3:#5cf8d4; --text:#f0f0f8; --muted:#7a7a9a; --gold:#ffc75f; --radius:16px;
    }
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
    html{scroll-behavior:smooth;}
    body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden;}
    body::before{content:'';position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");pointer-events:none;z-index:0;opacity:.5;}
    .orb{position:fixed;border-radius:50%;filter:blur(120px);pointer-events:none;z-index:0;}
    .orb1{width:600px;height:600px;background:rgba(124,92,252,0.15);top:-200px;left:-200px;}
    .orb2{width:500px;height:500px;background:rgba(252,92,125,0.1);bottom:-150px;right:-100px;}
    .orb3{width:400px;height:400px;background:rgba(92,248,212,0.07);top:50%;left:50%;transform:translate(-50%,-50%);}
    .app{position:relative;z-index:1;}
    .screen{display:none;min-height:100vh;}
    .screen.active{display:flex;flex-direction:column;}

    /* LANDING */
    #landing{align-items:center;justify-content:center;padding:40px 20px;text-align:center;}
    .landing-badge{display:inline-flex;align-items:center;gap:8px;background:rgba(124,92,252,0.15);border:1px solid rgba(124,92,252,0.3);border-radius:999px;padding:6px 16px;font-size:13px;color:#a78bfa;margin-bottom:32px;animation:fadeUp .6s ease both;}
    .landing-badge span{width:6px;height:6px;background:var(--accent);border-radius:50%;animation:pulse 2s infinite;}
    .landing-h1{font-family:'Syne',sans-serif;font-size:clamp(40px,7vw,80px);font-weight:800;line-height:1.05;letter-spacing:-2px;animation:fadeUp .7s .1s ease both;}
    .landing-h1 .grad{background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .landing-sub{max-width:560px;margin:20px auto 0;color:var(--muted);font-size:18px;line-height:1.6;animation:fadeUp .7s .2s ease both;}
    .landing-cta{display:inline-flex;align-items:center;gap:10px;margin-top:40px;padding:16px 36px;background:linear-gradient(135deg,var(--accent),#9b6dff);border:none;border-radius:999px;color:#fff;font-family:'Syne',sans-serif;font-size:16px;font-weight:700;cursor:pointer;transition:transform .2s,box-shadow .2s;box-shadow:0 0 40px rgba(124,92,252,0.4);animation:fadeUp .7s .3s ease both;}
    .landing-cta:hover{transform:translateY(-2px);box-shadow:0 0 60px rgba(124,92,252,0.6);}
    .landing-features{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;max-width:800px;margin:60px auto 0;width:100%;animation:fadeUp .7s .4s ease both;}
    .feat-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px;text-align:left;transition:border-color .2s,transform .2s;}
    .feat-card:hover{border-color:rgba(124,92,252,0.4);transform:translateY(-2px);}
    .feat-icon{font-size:28px;margin-bottom:10px;}
    .feat-card h3{font-family:'Syne',sans-serif;font-size:15px;font-weight:700;margin-bottom:6px;}
    .feat-card p{font-size:13px;color:var(--muted);line-height:1.5;}

    /* ONBOARDING */
    #onboarding{align-items:center;justify-content:center;padding:40px 20px;}
    .onboard-card{background:var(--surface);border:1px solid var(--border);border-radius:24px;padding:40px;max-width:560px;width:100%;animation:fadeUp .5s ease both;}
    .step-indicator{display:flex;gap:6px;margin-bottom:32px;}
    .step-dot{height:4px;flex:1;border-radius:999px;background:var(--surface2);transition:background .3s;}
    .step-dot.done{background:var(--accent);}
    .step-dot.active{background:linear-gradient(90deg,var(--accent),var(--accent2));}
    .onboard-step{display:none;}
    .onboard-step.active{display:block;animation:fadeUp .3s ease both;}
    .onboard-label{font-size:12px;font-weight:500;color:var(--accent);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;}
    .onboard-title{font-family:'Syne',sans-serif;font-size:26px;font-weight:800;margin-bottom:8px;}
    .onboard-sub{color:var(--muted);font-size:14px;margin-bottom:28px;line-height:1.5;}
    .form-group{margin-bottom:18px;}
    .form-group label{display:block;font-size:13px;font-weight:500;margin-bottom:8px;color:var(--muted);}
    .form-control{width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:12px 16px;color:var(--text);font-family:'DM Sans',sans-serif;font-size:14px;transition:border-color .2s;outline:none;}
    .form-control:focus{border-color:var(--accent);}
    .form-control::placeholder{color:var(--muted);}
    select.form-control option{background:#1c1c27;}
    .tag-grid{display:flex;flex-wrap:wrap;gap:8px;}
    .tag-btn{padding:8px 14px;border-radius:999px;background:var(--surface2);border:1px solid var(--border);color:var(--muted);font-size:13px;cursor:pointer;transition:all .2s;}
    .tag-btn.selected{background:rgba(124,92,252,0.2);border-color:var(--accent);color:var(--accent);}
    .btn-primary{width:100%;padding:14px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#9b6dff);border:none;color:#fff;font-family:'Syne',sans-serif;font-size:15px;font-weight:700;cursor:pointer;transition:opacity .2s,transform .2s;margin-top:8px;}
    .btn-primary:hover{opacity:.9;transform:translateY(-1px);}

    /* ANALYZING */
    #analyzing{align-items:center;justify-content:center;padding:40px 20px;text-align:center;}
    .analyze-ring{width:100px;height:100px;margin:0 auto 32px;border-radius:50%;border:3px solid var(--surface2);border-top-color:var(--accent);border-right-color:var(--accent2);animation:spin 1s linear infinite;}
    .analyze-title{font-family:'Syne',sans-serif;font-size:28px;font-weight:800;margin-bottom:12px;}
    .analyze-steps{list-style:none;margin-top:24px;text-align:left;max-width:320px;margin-left:auto;margin-right:auto;}
    .analyze-step{display:flex;align-items:center;gap:12px;padding:10px 0;color:var(--muted);font-size:14px;border-bottom:1px solid var(--border);transition:color .3s;}
    .analyze-step.done{color:var(--accent3);}
    .analyze-step.active{color:var(--text);}
    .step-check{width:20px;height:20px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:11px;flex-shrink:0;transition:all .3s;}
    .analyze-step.done .step-check{background:var(--accent3);border-color:var(--accent3);color:#000;}
    .analyze-step.active .step-check{border-color:var(--accent);animation:pulse 1s infinite;}

    /* DASHBOARD */
    #dashboard{flex-direction:column;}
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:16px 32px;border-bottom:1px solid var(--border);background:rgba(10,10,15,0.8);backdrop-filter:blur(20px);position:sticky;top:0;z-index:100;}
    .topbar-logo{font-family:'Syne',sans-serif;font-weight:800;font-size:18px;}
    .topbar-logo span{background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .topbar-user{display:flex;align-items:center;gap:12px;}
    .user-avatar{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:800;font-size:14px;}
    .dash-body{display:grid;grid-template-columns:260px 1fr;flex:1;}
    .sidebar{border-right:1px solid var(--border);padding:24px 16px;background:rgba(13,13,20,0.5);}
    .sidebar-nav{list-style:none;}
    .nav-item{display:flex;align-items:center;gap:12px;padding:10px 14px;border-radius:10px;cursor:pointer;color:var(--muted);font-size:14px;font-weight:500;transition:all .2s;margin-bottom:4px;}
    .nav-item:hover{background:var(--surface);color:var(--text);}
    .nav-item.active{background:rgba(124,92,252,0.15);color:var(--accent);}
    .nav-icon{font-size:18px;width:24px;text-align:center;}
    .sidebar-divider{height:1px;background:var(--border);margin:16px 0;}
    .rank-card{background:linear-gradient(135deg,rgba(124,92,252,0.2),rgba(252,92,125,0.1));border:1px solid rgba(124,92,252,0.3);border-radius:14px;padding:16px;margin-bottom:20px;}
    .rank-label{font-size:10px;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin-bottom:4px;}
    .rank-name{font-family:'Syne',sans-serif;font-size:16px;font-weight:800;color:var(--gold);margin-bottom:8px;}
    .xp-bar-wrap{background:rgba(255,255,255,0.1);border-radius:999px;height:6px;overflow:hidden;margin-bottom:6px;}
    .xp-bar{height:100%;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent2));transition:width 1s ease;}
    .xp-text{font-size:11px;color:var(--muted);}
    .main-content{padding:32px;overflow-y:auto;}
    .main-tab{display:none;}
    .main-tab.active{display:block;animation:fadeUp .3s ease both;}

    /* SCORE */
    .score-hero{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:32px;margin-bottom:24px;display:grid;grid-template-columns:1fr auto;gap:24px;align-items:center;}
    .score-title{font-family:'Syne',sans-serif;font-size:22px;font-weight:800;margin-bottom:8px;}
    .score-sub{color:var(--muted);font-size:14px;line-height:1.6;max-width:480px;}
    .score-ring-wrap{position:relative;width:120px;height:120px;flex-shrink:0;}
    .score-ring{transform:rotate(-90deg);}
    .score-ring circle{fill:none;stroke-width:8;}
    .score-ring .bg{stroke:var(--surface2);}
    .score-ring .fill{stroke:url(#scoreGrad);stroke-linecap:round;transition:stroke-dashoffset 1.5s ease;}
    .score-num{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-family:'Syne',sans-serif;font-size:28px;font-weight:800;text-align:center;}
    .score-num span{display:block;font-size:10px;font-weight:400;color:var(--muted);}
    .metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:24px;}
    .metric-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px;transition:transform .2s,border-color .2s;cursor:default;}
    .metric-card:hover{transform:translateY(-2px);border-color:rgba(124,92,252,0.3);}
    .metric-icon{font-size:24px;margin-bottom:8px;}
    .metric-label{font-size:12px;color:var(--muted);margin-bottom:4px;}
    .metric-val{font-family:'Syne',sans-serif;font-size:22px;font-weight:800;}
    .metric-badge{display:inline-block;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;margin-top:4px;}
    .badge-red{background:rgba(252,92,125,0.15);color:var(--accent2);}
    .badge-green{background:rgba(92,248,212,0.15);color:var(--accent3);}
    .badge-yellow{background:rgba(255,199,95,0.15);color:var(--gold);}

    /* ‚îÄ‚îÄ DIAGNOSIS CARDS (novo!) ‚îÄ‚îÄ */
    .diag-section-title{font-family:'Syne',sans-serif;font-size:18px;font-weight:800;margin:28px 0 16px;display:flex;align-items:center;gap:10px;}
    .diag-loading{display:flex;align-items:center;gap:14px;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px;}
    .diag-loading-ring{width:28px;height:28px;border-radius:50%;border:2px solid var(--surface2);border-top-color:var(--accent);animation:spin .8s linear infinite;flex-shrink:0;}
    .diag-loading-text{font-size:14px;color:var(--muted);}

    /* verdict card */
    .verdict-card{border-radius:20px;padding:24px;margin-bottom:16px;border:1px solid;animation:fadeUp .4s ease both;}
    .verdict-card.positive{background:rgba(92,248,212,0.05);border-color:rgba(92,248,212,0.2);}
    .verdict-card.warning{background:rgba(255,199,95,0.05);border-color:rgba(255,199,95,0.2);}
    .verdict-card.critical{background:rgba(252,92,125,0.05);border-color:rgba(252,92,125,0.2);}
    .verdict-card.opportunity{background:rgba(124,92,252,0.05);border-color:rgba(124,92,252,0.2);}
    .verdict-header{display:flex;align-items:center;gap:12px;margin-bottom:12px;}
    .verdict-icon{font-size:26px;}
    .verdict-label{font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px;}
    .verdict-card.positive .verdict-label{color:var(--accent3);}
    .verdict-card.warning .verdict-label{color:var(--gold);}
    .verdict-card.critical .verdict-label{color:var(--accent2);}
    .verdict-card.opportunity .verdict-label{color:var(--accent);}
    .verdict-title{font-family:'Syne',sans-serif;font-size:16px;font-weight:800;margin-bottom:8px;}
    .verdict-text{font-size:14px;color:var(--muted);line-height:1.7;}
    .verdict-text strong{color:var(--text);font-weight:600;}

    /* error cards */
    .errors-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px;margin-bottom:16px;}
    .error-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:18px;transition:border-color .2s,transform .2s;animation:fadeUp .4s ease both;}
    .error-card:hover{border-color:rgba(252,92,125,0.3);transform:translateY(-2px);}
    .error-num{font-family:'Syne',sans-serif;font-size:32px;font-weight:800;color:rgba(252,92,125,0.2);margin-bottom:4px;}
    .error-title{font-family:'Syne',sans-serif;font-size:14px;font-weight:800;margin-bottom:8px;color:var(--accent2);}
    .error-text{font-size:13px;color:var(--muted);line-height:1.6;}

    /* action card */
    .action-card{background:linear-gradient(135deg,rgba(124,92,252,0.1),rgba(92,248,212,0.05));border:1px solid rgba(124,92,252,0.25);border-radius:20px;padding:24px;display:flex;gap:16px;align-items:flex-start;animation:fadeUp .4s ease both;}
    .action-icon{font-size:32px;flex-shrink:0;}
    .action-title{font-family:'Syne',sans-serif;font-size:15px;font-weight:800;margin-bottom:6px;color:var(--accent);}
    .action-text{font-size:14px;color:var(--muted);line-height:1.6;}
    .action-cta-btn{display:inline-flex;align-items:center;gap:6px;margin-top:12px;padding:8px 18px;background:rgba(124,92,252,0.2);border:1px solid rgba(124,92,252,0.3);border-radius:999px;color:var(--accent);font-size:13px;font-weight:600;cursor:pointer;transition:all .2s;}
    .action-cta-btn:hover{background:rgba(124,92,252,0.35);}

    /* tips */
    .tips-list{display:flex;flex-direction:column;gap:12px;}
    .tip-item{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:16px 20px;display:flex;align-items:flex-start;gap:14px;transition:border-color .2s,transform .2s;}
    .tip-item:hover{border-color:rgba(124,92,252,0.3);transform:translateX(4px);}
    .tip-priority{width:8px;height:8px;border-radius:50%;margin-top:6px;flex-shrink:0;}
    .priority-high{background:var(--accent2);}
    .priority-med{background:var(--gold);}
    .priority-low{background:var(--accent3);}
    .tip-title{font-family:'Syne',sans-serif;font-size:14px;font-weight:700;margin-bottom:4px;}
    .tip-desc{font-size:13px;color:var(--muted);line-height:1.5;}

    /* POSTS */
    .post-generator{background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:28px;margin-bottom:24px;}
    .gen-title{font-family:'Syne',sans-serif;font-size:18px;font-weight:800;margin-bottom:20px;}
    .gen-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px;}
    .format-options{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:20px;}
    .format-btn{padding:8px 16px;border-radius:999px;border:1px solid var(--border);background:var(--surface2);color:var(--muted);font-size:13px;cursor:pointer;transition:all .2s;}
    .format-btn.selected{border-color:var(--accent);color:var(--accent);background:rgba(124,92,252,0.1);}
    .gen-btn{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;padding:14px;background:linear-gradient(135deg,var(--accent),#9b6dff);border:none;border-radius:10px;color:#fff;font-family:'Syne',sans-serif;font-size:15px;font-weight:700;cursor:pointer;transition:opacity .2s;}
    .gen-btn:hover{opacity:.9;}
    .gen-btn:disabled{opacity:.5;cursor:not-allowed;}
    .post-card{background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius);padding:20px;margin-top:20px;animation:fadeUp .4s ease both;}
    .post-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;}
    .post-type-badge{padding:4px 12px;border-radius:999px;font-size:12px;font-weight:600;background:rgba(124,92,252,0.2);color:var(--accent);}
    .post-copy-btn{background:transparent;border:1px solid var(--border);border-radius:8px;padding:6px 12px;color:var(--muted);font-size:12px;cursor:pointer;transition:all .2s;}
    .post-copy-btn:hover{border-color:var(--accent3);color:var(--accent3);}
    .post-content-area{background:var(--surface);border-radius:10px;padding:16px;font-size:14px;line-height:1.7;color:var(--text);white-space:pre-wrap;word-break:break-word;}
    .hashtag-cloud{margin-top:12px;display:flex;flex-wrap:wrap;gap:6px;}
    .hashtag{padding:4px 10px;border-radius:999px;background:rgba(92,248,212,0.1);color:var(--accent3);font-size:12px;}

    /* MISSIONS */
    .missions-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;}
    .mission-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px;transition:border-color .2s,transform .2s;}
    .mission-card:hover{border-color:rgba(124,92,252,0.3);transform:translateY(-2px);}
    .mission-card.done{border-color:rgba(92,248,212,0.3);background:rgba(92,248,212,0.03);}
    .mission-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;}
    .mission-icon{font-size:28px;}
    .mission-xp{font-family:'Syne',sans-serif;font-size:13px;font-weight:700;color:var(--gold);background:rgba(255,199,95,0.1);padding:3px 10px;border-radius:999px;}
    .mission-title{font-family:'Syne',sans-serif;font-size:15px;font-weight:700;margin-bottom:6px;}
    .mission-desc{font-size:13px;color:var(--muted);line-height:1.5;margin-bottom:14px;}
    .mission-check-btn{width:100%;padding:10px;border-radius:8px;background:transparent;border:1px solid var(--border);color:var(--muted);font-size:13px;cursor:pointer;transition:all .2s;}
    .mission-check-btn:hover{border-color:var(--accent);color:var(--accent);}
    .mission-card.done .mission-check-btn{background:rgba(92,248,212,0.1);border-color:var(--accent3);color:var(--accent3);}
    .levels-track{display:flex;gap:0;overflow-x:auto;padding:24px 0;margin-bottom:28px;}
    .level-node{flex-shrink:0;display:flex;flex-direction:column;align-items:center;width:120px;}
    .level-circle{width:52px;height:52px;border-radius:50%;background:var(--surface2);border:2px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:20px;position:relative;z-index:1;transition:all .3s;}
    .level-node.current .level-circle{border-color:var(--accent);box-shadow:0 0 20px rgba(124,92,252,0.4);background:rgba(124,92,252,0.15);}
    .level-node.done .level-circle{border-color:var(--accent3);background:rgba(92,248,212,0.1);}
    .level-name{font-size:11px;font-weight:600;margin-top:8px;text-align:center;color:var(--muted);}
    .level-node.current .level-name{color:var(--accent);}
    .level-node.done .level-name{color:var(--accent3);}
    .level-connector{flex:1;height:2px;background:var(--border);margin-top:26px;min-width:20px;}
    .level-connector.done{background:var(--accent3);}

    /* SEO */
    .seo-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;}
    .seo-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:22px;transition:transform .2s,border-color .2s;}
    .seo-card:hover{transform:translateY(-2px);border-color:rgba(124,92,252,0.3);}
    .seo-card-icon{font-size:32px;margin-bottom:12px;}
    .seo-card-title{font-family:'Syne',sans-serif;font-size:16px;font-weight:800;margin-bottom:8px;}
    .seo-card-desc{font-size:13px;color:var(--muted);line-height:1.6;margin-bottom:16px;}
    .seo-keywords{display:flex;flex-wrap:wrap;gap:6px;}
    .seo-kw{padding:4px 10px;background:rgba(124,92,252,0.1);border:1px solid rgba(124,92,252,0.2);border-radius:999px;font-size:12px;color:var(--accent);}

    /* TRENDS */
    .trend-item{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:18px 20px;margin-bottom:12px;display:flex;align-items:center;gap:16px;transition:border-color .2s,transform .2s;}
    .trend-item:hover{border-color:rgba(124,92,252,0.3);transform:translateX(4px);}
    .trend-rank{font-family:'Syne',sans-serif;font-size:28px;font-weight:800;color:var(--surface2);min-width:40px;}
    .trend-info{flex:1;}
    .trend-name{font-family:'Syne',sans-serif;font-size:15px;font-weight:700;margin-bottom:4px;}
    .trend-desc{font-size:13px;color:var(--muted);}
    .trend-heat{font-size:13px;font-weight:600;color:var(--accent2);white-space:nowrap;}

    /* SECTION */
    .section-header{margin-bottom:24px;}
    .section-title{font-family:'Syne',sans-serif;font-size:22px;font-weight:800;margin-bottom:6px;}
    .section-sub{font-size:14px;color:var(--muted);}

    /* XP POP */
    .xp-pop{position:fixed;pointer-events:none;font-family:'Syne',sans-serif;font-size:18px;font-weight:800;color:var(--gold);z-index:9999;animation:xpFly 1.2s ease forwards;}
    @keyframes xpFly{0%{opacity:1;transform:translateY(0) scale(1);}100%{opacity:0;transform:translateY(-60px) scale(1.3);}}

    /* TOAST */
    .toast{position:fixed;bottom:32px;right:32px;z-index:999;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:14px 20px;display:flex;align-items:center;gap:10px;font-size:14px;box-shadow:0 20px 60px rgba(0,0,0,0.5);transform:translateY(20px);opacity:0;transition:all .3s ease;}
    .toast.show{transform:translateY(0);opacity:1;}

    /* MOBILE */
    @media(max-width:768px){
      .dash-body{grid-template-columns:1fr;}
      .sidebar{display:none;}
      .score-hero{grid-template-columns:1fr;}
      .gen-grid{grid-template-columns:1fr;}
      .topbar{padding:12px 16px;}
      .main-content{padding:16px 16px 80px;}
      .mobile-nav{display:flex!important;}
    }
    .mobile-nav{display:none;position:fixed;bottom:0;left:0;right:0;background:var(--surface);border-top:1px solid var(--border);padding:8px 16px 20px;gap:4px;z-index:100;}
    .mobile-nav-item{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px 4px;border-radius:10px;cursor:pointer;color:var(--muted);font-size:10px;transition:all .2s;background:none;border:none;}
    .mobile-nav-item.active{color:var(--accent);background:rgba(124,92,252,0.1);}
    .mobile-nav-icon{font-size:20px;}

    @keyframes fadeUp{from{opacity:0;transform:translateY(16px);}to{opacity:1;transform:translateY(0);}}
    @keyframes spin{to{transform:rotate(360deg);}}
    @keyframes pulse{0%,100%{opacity:1;}50%{opacity:.4;}}
  </style>
</head>
<body>
<div class="orb orb1"></div><div class="orb orb2"></div><div class="orb orb3"></div>
<div class="app">

<!-- ‚ïê‚ïê LANDING ‚ïê‚ïê -->
<div class="screen active" id="landing">
  <div class="landing-badge"><span></span> Lan√ßamento ‚Äî Acesso Antecipado</div>
  <h1 class="landing-h1">Seu Instagram<br><span class="grad">profissional</span><br>no piloto autom√°tico</h1>
  <p class="landing-sub">A IA que analisa seu perfil, cria seus posts, te d√° miss√µes e te ajuda a virar refer√™ncia na sua √°rea ‚Äî sem travar.</p>
  <button class="landing-cta" onclick="goToOnboarding()">‚ú¶ Analisar meu Instagram</button>
  <div class="landing-features">
    <div class="feat-card"><div class="feat-icon">üîç</div><h3>Diagn√≥stico Real</h3><p>Score do seu perfil com pontos exatos de melhoria e prioridades.</p></div>
    <div class="feat-card"><div class="feat-icon">‚úçÔ∏è</div><h3>Posts com IA</h3><p>Legenda completa, hashtags e hor√°rio ideal gerados em segundos.</p></div>
    <div class="feat-card"><div class="feat-icon">üéÆ</div><h3>Miss√µes & Ranking</h3><p>Suba de n√≠vel completando tarefas e veja seu Instagram crescer.</p></div>
    <div class="feat-card"><div class="feat-icon">üîé</div><h3>SEO no Google</h3><p>Apare√ßa nas buscas locais e atraia clientes que j√° procuram voc√™.</p></div>
  </div>
</div>

<!-- ‚ïê‚ïê ONBOARDING ‚ïê‚ïê -->
<div class="screen" id="onboarding">
  <div class="onboard-card">
    <div class="step-indicator">
      <div class="step-dot active" id="sd1"></div><div class="step-dot" id="sd2"></div>
      <div class="step-dot" id="sd3"></div><div class="step-dot" id="sd4"></div>
    </div>
    <div class="onboard-step active" id="step1">
      <div class="onboard-label">Passo 1 de 4</div>
      <div class="onboard-title">Qual √© sua profiss√£o?</div>
      <div class="onboard-sub">Vamos personalizar tudo para a sua √°rea de atua√ß√£o.</div>
      <div class="form-group"><label>Profiss√£o</label>
        <select class="form-control" id="profession">
          <option value="">Selecione...</option>
          <option value="advogado">Advogado(a)</option><option value="dentista">Dentista</option>
          <option value="psicologo">Psic√≥logo(a)</option><option value="nutricionista">Nutricionista</option>
          <option value="medico">M√©dico(a)</option><option value="fisioterapeuta">Fisioterapeuta</option>
          <option value="arquiteto">Arquiteto(a)</option><option value="contador">Contador(a)</option>
          <option value="engenheiro">Engenheiro(a)</option><option value="coach">Coach / Mentor</option>
          <option value="outro">Outro</option>
        </select>
      </div>
      <div class="form-group"><label>Instagram (ex: @seuuser)</label><input class="form-control" type="text" id="instagram" placeholder="@seuperfil"/></div>
      <div class="form-group"><label>Cidade / Regi√£o</label><input class="form-control" type="text" id="city" placeholder="Ex: S√£o Paulo, SP"/></div>
      <button class="btn-primary" onclick="nextStep(2)">Continuar ‚Üí</button>
    </div>
    <div class="onboard-step" id="step2">
      <div class="onboard-label">Passo 2 de 4</div>
      <div class="onboard-title">Suas √°reas de atua√ß√£o</div>
      <div class="onboard-sub">Selecione os temas que voc√™ quer abordar no Instagram.</div>
      <div class="tag-grid" id="areasGrid"></div>
      <button class="btn-primary" style="margin-top:24px" onclick="nextStep(3)">Continuar ‚Üí</button>
    </div>
    <div class="onboard-step" id="step3">
      <div class="onboard-label">Passo 3 de 4</div>
      <div class="onboard-title">Seu cliente ideal</div>
      <div class="onboard-sub">A IA vai criar posts que ressoam com quem voc√™ quer atingir.</div>
      <div class="form-group"><label>Faixa et√°ria do cliente</label>
        <select class="form-control" id="clientAge">
          <option value="18-25">18 a 25 anos</option><option value="25-35" selected>25 a 35 anos</option>
          <option value="35-50">35 a 50 anos</option><option value="50+">50 anos ou mais</option><option value="todos">Todos</option>
        </select>
      </div>
      <div class="form-group"><label>Principal problema que voc√™ resolve</label><textarea class="form-control" rows="3" id="clientProblem" placeholder="Ex: Meus clientes chegam sem saber seus direitos..."></textarea></div>
      <div class="form-group"><label>Tom de voz</label>
        <div class="tag-grid" id="toneGrid">
          <div class="tag-btn" onclick="selectTag(this,'tone','educativo')">üìö Educativo</div>
          <div class="tag-btn" onclick="selectTag(this,'tone','humanizado')">üí¨ Humanizado</div>
          <div class="tag-btn" onclick="selectTag(this,'tone','autoridade')">üéØ Autoridade</div>
          <div class="tag-btn" onclick="selectTag(this,'tone','inspirador')">‚ú® Inspirador</div>
          <div class="tag-btn" onclick="selectTag(this,'tone','descontraido')">üòÑ Descontra√≠do</div>
        </div>
      </div>
      <button class="btn-primary" onclick="nextStep(4)">Continuar ‚Üí</button>
    </div>
    <div class="onboard-step" id="step4">
      <div class="onboard-label">Passo 4 de 4</div>
      <div class="onboard-title">Situa√ß√£o atual do perfil</div>
      <div class="onboard-sub">Isso ajuda a calibrar o diagn√≥stico com mais precis√£o.</div>
      <div class="form-group"><label>Quantos seguidores voc√™ tem?</label>
        <select class="form-control" id="followers">
          <option value="0-100">Menos de 100</option><option value="100-500">100 a 500</option>
          <option value="500-1000">500 a 1.000</option><option value="1000-5000">1.000 a 5.000</option><option value="5000+">Mais de 5.000</option>
        </select>
      </div>
      <div class="form-group"><label>Com que frequ√™ncia voc√™ posta?</label>
        <select class="form-control" id="frequency">
          <option value="nunca">Nunca / raramente</option><option value="mensal">1-2 vezes por m√™s</option>
          <option value="semanal">1-2 vezes por semana</option><option value="diario">Quase todos os dias</option>
        </select>
      </div>
      <div class="form-group"><label>Voc√™ j√° tem uma bio profissional?</label>
        <div class="tag-grid" id="bioGrid">
          <div class="tag-btn" onclick="selectTag(this,'bio','sim')">‚úÖ Sim, tenho</div>
          <div class="tag-btn" onclick="selectTag(this,'bio','parcial')">‚ö†Ô∏è Mais ou menos</div>
          <div class="tag-btn" onclick="selectTag(this,'bio','nao')">‚ùå N√£o tenho</div>
        </div>
      </div>
      <button class="btn-primary" onclick="startAnalysis()">üöÄ Analisar meu perfil agora</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê ANALYZING ‚ïê‚ïê -->
<div class="screen" id="analyzing">
  <div class="analyze-ring"></div>
  <div class="analyze-title">Analisando seu perfil...</div>
  <p style="color:var(--muted);font-size:14px">Isso vai levar alguns segundos</p>
  <ul class="analyze-steps" id="analyzeSteps">
    <li class="analyze-step active" id="as1"><div class="step-check"></div> Lendo dados do perfil</li>
    <li class="analyze-step" id="as2"><div class="step-check"></div> Avaliando bio e posicionamento</li>
    <li class="analyze-step" id="as3"><div class="step-check"></div> Calculando score de autoridade</li>
    <li class="analyze-step" id="as4"><div class="step-check"></div> Gerando diagn√≥stico personalizado</li>
    <li class="analyze-step" id="as5"><div class="step-check"></div> Preparando miss√µes de crescimento</li>
  </ul>
</div>

<!-- ‚ïê‚ïê DASHBOARD ‚ïê‚ïê -->
<div class="screen" id="dashboard">
  <div class="topbar">
    <div class="topbar-logo">Insta<span>Pro.ai</span></div>
    <div class="topbar-user">
      <div style="font-size:13px;color:var(--muted)" id="topbarUser"></div>
      <div class="user-avatar" id="userAvatar">?</div>
    </div>
  </div>
  <div class="dash-body">
    <div class="sidebar">
      <div class="rank-card">
        <div class="rank-label">Seu n√≠vel atual</div>
        <div class="rank-name" id="sidebarRankName">üå± Iniciante</div>
        <div class="xp-bar-wrap"><div class="xp-bar" id="sidebarXpBar" style="width:15%"></div></div>
        <div class="xp-text" id="sidebarXpText">150 / 1000 XP</div>
      </div>
      <ul class="sidebar-nav">
        <li class="nav-item active" onclick="switchTab('diagnostico',this)"><span class="nav-icon">üîç</span> Diagn√≥stico</li>
        <li class="nav-item" onclick="switchTab('posts',this)"><span class="nav-icon">‚úçÔ∏è</span> Criar Posts</li>
        <li class="nav-item" onclick="switchTab('ranking',this)"><span class="nav-icon">üèÜ</span> Miss√µes & Ranking</li>
        <li class="nav-item" onclick="switchTab('seo',this)"><span class="nav-icon">üîé</span> SEO no Google</li>
        <li class="nav-item" onclick="switchTab('trends',this)"><span class="nav-icon">üìà</span> Tend√™ncias</li>
      </ul>
    </div>
    <div class="main-content">

      <!-- ‚îÄ‚îÄ DIAGN√ìSTICO ‚îÄ‚îÄ -->
      <div class="main-tab active" id="tab-diagnostico">
        <div class="section-header">
          <div class="section-title">Diagn√≥stico do Perfil</div>
          <div class="section-sub" id="diagSub">An√°lise completa do seu Instagram</div>
        </div>

        <!-- Score hero -->
        <div class="score-hero">
          <div>
            <div class="score-title">Score de Autoridade</div>
            <p class="score-sub" id="scoreDesc">Calculando...</p>
          </div>
          <div class="score-ring-wrap">
            <svg class="score-ring" width="120" height="120" viewBox="0 0 120 120">
              <defs><linearGradient id="scoreGrad" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#7c5cfc"/><stop offset="100%" style="stop-color:#fc5c7d"/></linearGradient></defs>
              <circle class="bg" cx="60" cy="60" r="52"/>
              <circle class="fill" id="scoreCircle" cx="60" cy="60" r="52" stroke-dasharray="326.7" stroke-dashoffset="326.7"/>
            </svg>
            <div class="score-num" id="scoreNum">0<span>/ 100</span></div>
          </div>
        </div>

        <!-- Metrics -->
        <div class="metrics-grid">
          <div class="metric-card"><div class="metric-icon">üìù</div><div class="metric-label">Bio</div><div class="metric-val" id="metrBio">‚Äî</div><div class="metric-badge" id="metrBioB"></div></div>
          <div class="metric-card"><div class="metric-icon">üìÖ</div><div class="metric-label">Frequ√™ncia</div><div class="metric-val" id="metrFreq">‚Äî</div><div class="metric-badge" id="metrFreqB"></div></div>
          <div class="metric-card"><div class="metric-icon">üë•</div><div class="metric-label">Seguidores</div><div class="metric-val" id="metrFollow">‚Äî</div><div class="metric-badge" id="metrFollowB"></div></div>
          <div class="metric-card"><div class="metric-icon">üéØ</div><div class="metric-label">Nicho</div><div class="metric-val" id="metrNiche">‚Äî</div><div class="metric-badge badge-green">‚úì Definido</div></div>
        </div>

        <!-- AI Diagnosis rendered as cards -->
        <div class="diag-section-title">‚ú¶ O que encontramos no seu perfil</div>
        <div id="diagCardsArea">
          <div class="diag-loading">
            <div class="diag-loading-ring"></div>
            <div class="diag-loading-text">Gerando sua an√°lise personalizada... isso leva alguns segundos.</div>
          </div>
        </div>

        <!-- Static tips -->
        <div class="diag-section-title" style="margin-top:32px">üîß Suas prioridades agora</div>
        <div class="tips-list" id="tipsList"></div>
      </div>

      <!-- ‚îÄ‚îÄ POSTS ‚îÄ‚îÄ -->
      <div class="main-tab" id="tab-posts">
        <div class="section-header">
          <div class="section-title">Criar Post com IA</div>
          <div class="section-sub">Gere legendas, hashtags e ideias de conte√∫do em segundos</div>
        </div>
        <div class="post-generator">
          <div class="gen-title">‚ú¶ Gerador de Conte√∫do</div>
          <div class="gen-grid">
            <div class="form-group"><label>Tema do post</label><input class="form-control" id="postTema" placeholder="Ex: Direitos do consumidor"/></div>
            <div class="form-group"><label>Objetivo</label>
              <select class="form-control" id="postObjetivo">
                <option value="educar">Educar / Informar</option>
                <option value="engajar">Gerar Engajamento</option>
                <option value="captar">Captar Clientes</option>
                <option value="humanizar">Humanizar / Bastidores</option>
                <option value="autoridade">Mostrar Autoridade</option>
              </select>
            </div>
          </div>
          <div style="margin-bottom:16px">
            <label style="font-size:13px;color:var(--muted);display:block;margin-bottom:8px">Formato</label>
            <div class="format-options">
              <div class="format-btn selected" onclick="selectFormat(this,'carrossel')">üì± Carrossel</div>
              <div class="format-btn" onclick="selectFormat(this,'reels')">üé¨ Reels</div>
              <div class="format-btn" onclick="selectFormat(this,'estatico')">üñºÔ∏è Est√°tico</div>
              <div class="format-btn" onclick="selectFormat(this,'stories')">üìñ Stories</div>
            </div>
          </div>
          <div class="form-group"><label>Contexto extra (opcional)</label><textarea class="form-control" id="postContext" rows="2" placeholder="Ex: Quero mencionar um caso recente..."></textarea></div>
          <button class="gen-btn" id="genBtn" onclick="generatePost()">‚ú¶ Gerar Post Agora</button>
        </div>
        <div id="postOutput"></div>
      </div>

      <!-- ‚îÄ‚îÄ RANKING ‚îÄ‚îÄ -->
      <div class="main-tab" id="tab-ranking">
        <div class="section-header">
          <div class="section-title">Miss√µes & Ranking</div>
          <div class="section-sub">Complete miss√µes, ganhe XP e evolua seu n√≠vel de autoridade</div>
        </div>
        <div style="background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:24px;margin-bottom:24px;overflow-x:auto">
          <div style="font-family:'Syne',sans-serif;font-size:15px;font-weight:800;margin-bottom:20px">Trilha de Evolu√ß√£o</div>
          <div class="levels-track">
            <div class="level-node done"><div class="level-circle">üå±</div><div class="level-name">Iniciante</div></div>
            <div class="level-connector done"></div>
            <div class="level-node current"><div class="level-circle">‚≠ê</div><div class="level-name">Ativo</div></div>
            <div class="level-connector"></div>
            <div class="level-node"><div class="level-circle">üî•</div><div class="level-name">Crescendo</div></div>
            <div class="level-connector"></div>
            <div class="level-node"><div class="level-circle">üíé</div><div class="level-name">Autoridade</div></div>
            <div class="level-connector"></div>
            <div class="level-node"><div class="level-circle">üëë</div><div class="level-name">Refer√™ncia</div></div>
          </div>
        </div>
        <div style="background:var(--surface);border:1px solid var(--border);border-radius:20px;padding:24px;margin-bottom:24px">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
            <div style="font-family:'Syne',sans-serif;font-size:15px;font-weight:800">Seu XP Total</div>
            <div style="font-family:'Syne',sans-serif;font-size:24px;font-weight:800;color:var(--gold)" id="totalXp">150 XP</div>
          </div>
          <div class="xp-bar-wrap" style="height:10px"><div class="xp-bar" id="bigXpBar" style="width:15%"></div></div>
          <div style="display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-top:8px"><span>‚≠ê Ativo</span><span id="xpNextLabel">850 XP para üî• Crescendo</span></div>
        </div>
        <div style="font-family:'Syne',sans-serif;font-size:18px;font-weight:800;margin-bottom:16px">üéØ Miss√µes da Semana</div>
        <div class="missions-grid" id="missionsGrid"></div>
      </div>

      <!-- ‚îÄ‚îÄ SEO ‚îÄ‚îÄ -->
      <div class="main-tab" id="tab-seo">
        <div class="section-header">
          <div class="section-title">SEO no Google</div>
          <div class="section-sub">Apare√ßa quando algu√©m buscar pelo seu servi√ßo na sua cidade</div>
        </div>
        <div class="seo-cards" id="seoCards"></div>
      </div>

      <!-- ‚îÄ‚îÄ TEND√äNCIAS ‚îÄ‚îÄ -->
      <div class="main-tab" id="tab-trends">
        <div class="section-header">
          <div class="section-title">Radar de Tend√™ncias</div>
          <div class="section-sub">O que est√° bombando no digital para profissionais liberais</div>
        </div>
        <div id="trendsList"></div>
      </div>

    </div>
  </div>

  <!-- MOBILE NAV -->
  <div class="mobile-nav">
    <button class="mobile-nav-item active" onclick="switchTab('diagnostico',this,true)"><span class="mobile-nav-icon">üîç</span>Diagn√≥stico</button>
    <button class="mobile-nav-item" onclick="switchTab('posts',this,true)"><span class="mobile-nav-icon">‚úçÔ∏è</span>Posts</button>
    <button class="mobile-nav-item" onclick="switchTab('ranking',this,true)"><span class="mobile-nav-icon">üèÜ</span>Miss√µes</button>
    <button class="mobile-nav-item" onclick="switchTab('seo',this,true)"><span class="mobile-nav-icon">üîé</span>SEO</button>
    <button class="mobile-nav-item" onclick="switchTab('trends',this,true)"><span class="mobile-nav-icon">üìà</span>Tend√™ncias</button>
  </div>
</div>

</div><!-- /app -->
<div class="toast" id="toast"><span id="toastIcon">‚úì</span><span id="toastMsg">OK</span></div>

<script>
const S={
  profession:'',instagram:'',city:'',areas:[],tone:'educativo',
  clientAge:'25-35',clientProblem:'',followers:'0-100',frequency:'nunca',bio:'nao',
  xp:150,missions:[],selectedFormat:'carrossel'
};
const AREAS={
  advogado:['Direito Civil','Direito de Fam√≠lia','Direito Trabalhista','Direito Criminal','Direito do Consumidor','Div√≥rcio','Invent√°rio','Direito Empresarial'],
  dentista:['Cl√≠nica Geral','Ortodontia','Implante Dent√°rio','Est√©tica Dental','Clareamento','Odontopediatria','Pr√≥tese Dent√°ria'],
  psicologo:['Ansiedade','Depress√£o','Relacionamentos','Autoestima','TCC','Psicologia Infantil','Terapia de Casal','Burnout'],
  nutricionista:['Emagrecimento','Ganho de Massa','Nutri√ß√£o Esportiva','Reeduca√ß√£o Alimentar','Nutri√ß√£o Funcional','Gestantes'],
  medico:['Cl√≠nica Geral','Medicina Preventiva','Dermatologia','Cardiologia','Pediatria','Ginecologia'],
  fisioterapeuta:['Reabilita√ß√£o','Pilates','RPG','Dor Cr√¥nica','Esportiva','Neurol√≥gica'],
  arquiteto:['Residencial','Comercial','Interiores','Projetos Sustent√°veis','Reformas','Paisagismo'],
  contador:['Abertura de Empresa','Imposto de Renda','MEI','Planejamento Tribut√°rio','BPO Financeiro'],
  engenheiro:['Constru√ß√£o Civil','Laudos','Projetos Estruturais','El√©trica','Hidr√°ulica'],
  coach:['Lideran√ßa','Carreira','Vida','Finan√ßas','Alta Performance'],
  outro:['Marketing Pessoal','Branding','Empreendedorismo','Produtividade'],
};

function showScreen(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');}
function goToOnboarding(){showScreen('onboarding');}
function switchTab(name,el,isMobile){
  document.querySelectorAll('.main-tab').forEach(t=>t.classList.remove('active'));
  document.getElementById('tab-'+name).classList.add('active');
  document.querySelectorAll(isMobile?'.mobile-nav-item':'.nav-item').forEach(i=>i.classList.remove('active'));
  el.classList.add('active');
}

function nextStep(n){
  if(n===2){S.profession=document.getElementById('profession').value;S.instagram=document.getElementById('instagram').value;S.city=document.getElementById('city').value;if(!S.profession){showToast('‚ö†Ô∏è Selecione sua profiss√£o',true);return;}populateAreas();}
  if(n===3&&S.areas.length===0){showToast('‚ö†Ô∏è Selecione ao menos uma √°rea',true);return;}
  if(n===4){S.clientAge=document.getElementById('clientAge').value;S.clientProblem=document.getElementById('clientProblem').value;}
  document.querySelectorAll('.onboard-step').forEach(s=>s.classList.remove('active'));
  document.getElementById('step'+n).classList.add('active');
  for(let i=1;i<=4;i++){const d=document.getElementById('sd'+i);d.className='step-dot';if(i<n)d.classList.add('done');if(i===n)d.classList.add('active');}
}

function populateAreas(){
  const grid=document.getElementById('areasGrid');grid.innerHTML='';
  (AREAS[S.profession]||AREAS.outro).forEach(a=>{
    const b=document.createElement('div');b.className='tag-btn';b.textContent=a;
    b.onclick=()=>{b.classList.toggle('selected');const i=S.areas.indexOf(a);i===-1?S.areas.push(a):S.areas.splice(i,1);};
    grid.appendChild(b);
  });
}

function selectTag(el,key,val){
  el.closest('.tag-grid').querySelectorAll('.tag-btn').forEach(b=>b.classList.remove('selected'));
  el.classList.add('selected');S[key]=val;
}

function startAnalysis(){
  S.followers=document.getElementById('followers').value;
  S.frequency=document.getElementById('frequency').value;
  showScreen('analyzing');
  const steps=['as1','as2','as3','as4','as5'];let i=0;
  function tick(){
    if(i>0){const p=document.getElementById(steps[i-1]);p.classList.remove('active');p.classList.add('done');p.querySelector('.step-check').textContent='‚úì';}
    if(i<steps.length){document.getElementById(steps[i]).classList.add('active');i++;setTimeout(tick,900);}
    else{setTimeout(()=>{document.getElementById(steps[steps.length-1]).classList.remove('active');document.getElementById(steps[steps.length-1]).classList.add('done');document.getElementById(steps[steps.length-1]).querySelector('.step-check').textContent='‚úì';buildDashboard();showScreen('dashboard');loadAiDiagnosis();},600);}
  }
  tick();
}

function buildDashboard(){
  const ig=S.instagram||'@profissional';
  document.getElementById('topbarUser').textContent=ig;
  document.getElementById('userAvatar').textContent=(ig.replace('@','')[0]||'P').toUpperCase();
  document.getElementById('diagSub').textContent=`An√°lise de ${ig} ‚Äî ${S.profession}`;
  animateScore(calcScore());buildMetrics();buildTips();buildMissions();buildSeo();buildTrends();updateXpUI();
}

function calcScore(){
  let s=20;
  if(S.bio==='sim')s+=20;else if(S.bio==='parcial')s+=10;
  if(S.frequency==='diario')s+=20;else if(S.frequency==='semanal')s+=12;else if(S.frequency==='mensal')s+=4;
  if(S.followers!=='0-100')s+=10;if(S.areas.length>=3)s+=10;if(S.tone)s+=5;if(S.city)s+=5;
  return Math.min(s,78);
}

function animateScore(score){
  const circ=document.getElementById('scoreCircle'),numEl=document.getElementById('scoreNum');
  const C=326.7;let cur=0;
  const iv=setInterval(()=>{cur=Math.min(cur+1,score);numEl.innerHTML=`${cur}<span>/ 100</span>`;circ.style.strokeDashoffset=C-(cur/100)*C;if(cur>=score)clearInterval(iv);},25);
  document.getElementById('scoreDesc').textContent=score<35?'Perfil invis√≠vel ‚Äî ainda sem sinal claro de autoridade. Boa not√≠cia: qualquer a√ß√£o agora vai gerar resultado vis√≠vel r√°pido.':score<55?'Voc√™ tem uma base, mas ainda falta consist√™ncia e posicionamento claro.':'Bom come√ßo! Hora de escalar com conte√∫do estrat√©gico e presen√ßa fora do Instagram.';
}

function buildMetrics(){
  const bm={sim:['Otimizada','badge-green'],parcial:['Incompleta','badge-yellow'],nao:['Ausente','badge-red']};
  const fm={diario:['Di√°ria','badge-green'],semanal:['Semanal','badge-yellow'],mensal:['Rara','badge-red'],nunca:['Inexistente','badge-red']};
  set('metrBio',bm[S.bio][0]);setBadge('metrBioB',bm[S.bio][0],bm[S.bio][1]);
  set('metrFreq',fm[S.frequency][0]);setBadge('metrFreqB',fm[S.frequency][0],fm[S.frequency][1]);
  set('metrFollow',S.followers);setBadge('metrFollowB',S.followers==='5000+'?'üî• √ìtimo':'Crescendo',S.followers==='5000+'?'badge-green':'badge-yellow');
  set('metrNiche',profLabel(S.profession));
}
function set(id,txt){document.getElementById(id).textContent=txt;}
function setBadge(id,txt,cls){const el=document.getElementById(id);el.textContent=txt;el.className='metric-badge '+cls;}
function profLabel(p){return{advogado:'Direito',dentista:'Odonto',psicologo:'Psico',nutricionista:'Nutri',medico:'Medicina',fisioterapeuta:'Fisio',arquiteto:'Arq.',contador:'Contab.',engenheiro:'Eng.',coach:'Coach',outro:'Outro'}[p]||p;}

function buildTips(){
  const tips=[];
  if(S.bio!=='sim')tips.push({p:'high',title:'üîß Reescreva sua bio profissional',desc:`Responda em 3 segundos: quem voc√™ √©, o que resolve e onde atende. Ex: "${profLabel(S.profession)} em ${S.city||'sua cidade'} | ${S.areas[0]||'especialidade'} | üì≤ DM para consulta"`});
  if(S.frequency==='nunca'||S.frequency==='mensal')tips.push({p:'high',title:'üìÖ Crie uma agenda m√≠nima de posts',desc:'Poste pelo menos 3 vezes por semana. Consist√™ncia vale mais que perfei√ß√£o.'});
  tips.push({p:'med',title:'üé† Invista em Carross√©is educativos',desc:`Carross√©is t√™m 3x mais salvamentos. Ideia: "5 d√∫vidas que todo ${profLabel(S.profession)} responde" ‚Äî direto, √∫til, salv√°vel.`});
  tips.push({p:'med',title:'üì≤ CTA em todo post',desc:'Cada legenda deve terminar com uma a√ß√£o clara: "Salva esse post", "Manda DM", "Comenta sua d√∫vida".'});
  if(S.city)tips.push({p:'low',title:`üìç Use localiza√ß√£o em todos os posts`,desc:`Marque "${S.city}" toda vez. Aumenta sua visibilidade para quem busca ${S.profession} na regi√£o.`});
  const list=document.getElementById('tipsList');list.innerHTML='';
  tips.forEach(t=>{list.innerHTML+=`<div class="tip-item"><div class="tip-priority priority-${t.p}"></div><div><div class="tip-title">${t.title}</div><div class="tip-desc">${t.desc}</div></div></div>`;});
}

// ‚îÄ‚îÄ AI DIAGNOSIS ‚Äî rendered as visual cards ‚îÄ‚îÄ
async function loadAiDiagnosis(){
  const area=document.getElementById('diagCardsArea');

  const prompt=`Voc√™ √© o InstaPro.ai, uma plataforma de marketing digital para profissionais liberais. Fale na primeira pessoa do plural ("encontramos", "identificamos") como se fosse a plataforma falando.

Perfil analisado:
- Profiss√£o: ${S.profession}
- Instagram: ${S.instagram||'n√£o informado'}
- Cidade: ${S.city||'n√£o informada'}
- √Åreas: ${S.areas.join(', ')||'n√£o informadas'}
- Tom: ${S.tone} | Cliente: ${S.clientAge} anos
- Seguidores: ${S.followers} | Frequ√™ncia: ${S.frequency} | Bio: ${S.bio}
- Problema que resolve: ${S.clientProblem||'n√£o informado'}

Retorne SOMENTE um JSON v√°lido (sem markdown, sem backticks) com esta estrutura:
{
  "veredicto": "2-3 frases diretas sobre o est√°gio atual do perfil. Seja honesto e motivador ao mesmo tempo.",
  "erros": [
    {"titulo": "nome curto do erro", "texto": "explica√ß√£o em 1-2 frases pr√°ticas e diretas"},
    {"titulo": "nome curto do erro", "texto": "..."},
    {"titulo": "nome curto do erro", "texto": "..."}
  ],
  "oportunidade": "1 par√°grafo sobre a maior oportunidade espec√≠fica para esse profissional agora no Instagram",
  "acao_hoje": "1 a√ß√£o concreta e espec√≠fica para fazer hoje, em 1 frase imperativa"
}`;

  try{
    const res=await fetch('/api/generate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt})});
    const data=await res.json();
    if(data.error)throw new Error(data.error);
    let parsed;
    try{parsed=JSON.parse(data.result.replace(/```json|```/g,'').trim());}
    catch{throw new Error('Resposta inesperada da IA');}
    renderDiagCards(parsed,area);
    showToast('‚ú¶ Diagn√≥stico gerado!');
  }catch(err){
    area.innerHTML=`<div class="verdict-card warning"><div class="verdict-header"><div class="verdict-icon">‚ö†Ô∏è</div><div class="verdict-label">Aten√ß√£o</div></div><div class="verdict-text">N√£o foi poss√≠vel gerar o diagn√≥stico com IA agora. Verifique a vari√°vel <strong>ANTHROPIC_API_KEY</strong> no Vercel.<br><small style="color:var(--muted)">${err.message}</small></div></div>`;
  }
}

function renderDiagCards(d,container){
  // strip markdown bold from any text
  const clean=t=>(t||'').replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>').replace(/\*(.*?)\*/g,'$1');

  let html=`
    <div class="verdict-card positive" style="animation-delay:.0s">
      <div class="verdict-header"><div class="verdict-icon">üìä</div><div class="verdict-label">Vis√£o Geral</div></div>
      <div class="verdict-text">${clean(d.veredicto)}</div>
    </div>`;

  if(d.erros&&d.erros.length){
    html+=`<div class="errors-grid">`;
    d.erros.forEach((e,i)=>{
      html+=`<div class="error-card" style="animation-delay:${0.1+i*0.08}s">
        <div class="error-num">0${i+1}</div>
        <div class="error-title">${e.titulo}</div>
        <div class="error-text">${clean(e.texto)}</div>
      </div>`;
    });
    html+=`</div>`;
  }

  if(d.oportunidade){
    html+=`<div class="verdict-card opportunity" style="animation-delay:.35s">
      <div class="verdict-header"><div class="verdict-icon">üí°</div><div class="verdict-label">Sua Oportunidade de Ouro</div></div>
      <div class="verdict-text">${clean(d.oportunidade)}</div>
    </div>`;
  }

  if(d.acao_hoje){
    html+=`<div class="action-card" style="animation-delay:.45s">
      <div class="action-icon">‚ö°</div>
      <div>
        <div class="action-title">Fa√ßa isso hoje</div>
        <div class="action-text">${clean(d.acao_hoje)}</div>
        <div class="action-cta-btn" onclick="switchTab('posts',document.querySelector('.nav-item:nth-child(2)'))">‚úçÔ∏è Criar post agora ‚Üí</div>
      </div>
    </div>`;
  }

  container.innerHTML=html;
}

// ‚îÄ‚îÄ POST GENERATOR ‚îÄ‚îÄ
function selectFormat(el,fmt){document.querySelectorAll('.format-btn').forEach(b=>b.classList.remove('selected'));el.classList.add('selected');S.selectedFormat=fmt;}

async function generatePost(){
  const tema=document.getElementById('postTema').value.trim();
  if(!tema){showToast('‚ö†Ô∏è Digite o tema do post',true);return;}
  const objetivo=document.getElementById('postObjetivo').value;
  const context=document.getElementById('postContext').value.trim();
  const btn=document.getElementById('genBtn');
  btn.disabled=true;btn.textContent='‚è≥ Gerando...';

  const prompt=`Voc√™ √© o InstaPro.ai. Crie um post completo para Instagram.

Profissional: ${S.profession} em ${S.city||'Brasil'} | √Åreas: ${S.areas.join(', ')} | Tom: ${S.tone} | Cliente: ${S.clientAge} anos
Formato: ${S.selectedFormat} | Tema: ${tema} | Objetivo: ${objetivo}
Contexto: ${context||'nenhum'}

Retorne SOMENTE JSON v√°lido (sem markdown, sem backticks):
{
  "titulo": "t√≠tulo chamativo",
  "legenda": "legenda completa com quebras de linha, emojis e CTA",
  "hashtags": ["hashtag1","hashtag2",...],
  "dica_extra": "dica de hor√°rio e como postar"
}
Use 15 hashtags. Legenda entre 150-300 palavras.`;

  try{
    const res=await fetch('/api/generate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt})});
    const data=await res.json();
    if(data.error)throw new Error(data.error);
    let parsed;
    try{parsed=JSON.parse(data.result.replace(/```json|```/g,'').trim());}
    catch{parsed={titulo:tema,legenda:data.result,hashtags:[],dica_extra:''};}
    showPost(parsed);
    S.xp+=20;updateXpUI();spawnXp('+20 XP');
    showToast('‚ú® Post gerado!');
  }catch(err){showToast('‚ö†Ô∏è Erro: '+err.message,true);}
  finally{btn.disabled=false;btn.textContent='‚ú¶ Gerar Post Agora';}
}

function showPost(post){
  const hashtags=(post.hashtags||[]).map(h=>`<span class="hashtag">${h.startsWith('#')?h:'#'+h}</span>`).join('');
  document.getElementById('postOutput').innerHTML=`<div class="post-card">
    <div class="post-card-header"><span class="post-type-badge">üì± ${S.selectedFormat}</span><button class="post-copy-btn" onclick="copyPost(this)">üìã Copiar legenda</button></div>
    <div style="font-family:'Syne',sans-serif;font-size:16px;font-weight:800;margin-bottom:12px">${post.titulo||''}</div>
    <div class="post-content-area" id="postLegenda">${post.legenda||''}</div>
    <div class="hashtag-cloud">${hashtags}</div>
    ${post.dica_extra?`<div style="margin-top:14px;padding:12px;background:rgba(92,248,212,0.05);border:1px solid rgba(92,248,212,0.15);border-radius:10px;font-size:13px;color:var(--accent3)">${post.dica_extra}</div>`:''}
  </div>`;
}

function copyPost(btn){
  navigator.clipboard.writeText(document.getElementById('postLegenda').textContent).then(()=>{btn.textContent='‚úÖ Copiado!';setTimeout(()=>btn.textContent='üìã Copiar legenda',2000);showToast('üìã Legenda copiada!');});
}

// ‚îÄ‚îÄ MISSIONS ‚îÄ‚îÄ
function buildMissions(){
  S.missions=[
    {id:'m1',icon:'üìù',title:'Otimize sua bio',desc:'Reescreva sua bio: Quem voc√™ √© + O que resolve + Onde + CTA.',xp:50,done:false},
    {id:'m2',icon:'üì∏',title:'Poste 3 vezes esta semana',desc:'3 posts em 7 dias ‚Äî carrossel, stories ou reels. Consist√™ncia √© tudo.',xp:80,done:false},
    {id:'m3',icon:'üé¨',title:'Grave seu primeiro Reels',desc:'30 segundos respondendo a d√∫vida mais comum que voc√™ recebe.',xp:100,done:false},
    {id:'m4',icon:'üí¨',title:'Responda todos os coment√°rios',desc:'Por 7 dias, responda 100% dos coment√°rios em at√© 1h.',xp:60,done:false},
    {id:'m5',icon:'üîë',title:'Configure o Google Meu Neg√≥cio',desc:'Perfil gratuito no Google ‚Äî atrai clientes locais que j√° procuram voc√™.',xp:120,done:false},
    {id:'m6',icon:'üìä',title:'Crie um carrossel com dicas',desc:`"5 d√∫vidas que um ${profLabel(S.profession)} responde toda semana".`,xp:70,done:false},
  ];
  renderMissions();
}

function renderMissions(){
  document.getElementById('missionsGrid').innerHTML=S.missions.map(m=>`
    <div class="mission-card ${m.done?'done':''}" id="mc-${m.id}">
      <div class="mission-header"><div class="mission-icon">${m.icon}</div><div class="mission-xp">+${m.xp} XP</div></div>
      <div class="mission-title">${m.title}</div>
      <div class="mission-desc">${m.desc}</div>
      <button class="mission-check-btn" onclick="completeMission('${m.id}')">${m.done?'‚úÖ Conclu√≠da!':'‚úì Marcar como feita'}</button>
    </div>`).join('');
}

function completeMission(id){
  const m=S.missions.find(x=>x.id===id);if(!m||m.done)return;
  m.done=true;S.xp+=m.xp;updateXpUI();renderMissions();
  spawnXp(`+${m.xp} XP`);showToast(`üéâ +${m.xp} XP! "${m.title}" conclu√≠da!`);
}

function updateXpUI(){
  const levels=[{name:'üå± Iniciante',min:0,max:300},{name:'‚≠ê Ativo',min:300,max:700},{name:'üî• Crescendo',min:700,max:1300},{name:'üíé Autoridade',min:1300,max:2000},{name:'üëë Refer√™ncia',min:2000,max:3000}];
  const lvl=levels.find(l=>S.xp<l.max)||levels[levels.length-1];
  const pct=Math.min(((S.xp-lvl.min)/(lvl.max-lvl.min))*100,100);
  set('totalXp',S.xp+' XP');
  document.getElementById('bigXpBar').style.width=pct+'%';
  document.getElementById('sidebarXpBar').style.width=pct+'%';
  set('sidebarRankName',lvl.name);set('sidebarXpText',`${S.xp} / ${lvl.max} XP`);
  const next=levels[levels.indexOf(lvl)+1];
  if(next)set('xpNextLabel',`${lvl.max-S.xp} XP para ${next.name}`);
}

function spawnXp(txt){
  const el=document.createElement('div');el.className='xp-pop';el.textContent=txt;
  el.style.cssText=`left:${window.innerWidth/2-30}px;top:${window.innerHeight/2}px;`;
  document.body.appendChild(el);setTimeout(()=>el.remove(),1300);
}

// ‚îÄ‚îÄ SEO ‚îÄ‚îÄ
function buildSeo(){
  const city=S.city||'sua cidade',area=S.areas[0]||'especialidade',p=S.profession;
  const cards=[
    {icon:'üó∫Ô∏è',title:'Google Meu Neg√≥cio',desc:`Seu cart√£o de visita gratuito no Google. Apare√ßa quando algu√©m buscar "${p} em ${city}". Adicione fotos, hor√°rios e pe√ßa avalia√ß√µes.`,keywords:[`${p} em ${city}`,`${area} ${city}`,`${p} perto de mim`,`${p} ${city} avalia√ß√µes`]},
    {icon:'‚úçÔ∏è',title:'Conte√∫do para Blog / Site',desc:`Artigos sobre d√∫vidas comuns atraem visitantes org√¢nicos. Escreva posts "Como [resolver problema] em ${city}".`,keywords:[`como encontrar ${p}`,`quando preciso de ${p}`,`quanto custa ${area}`,`${p} ${city} pre√ßo`]},
    {icon:'‚≠ê',title:'Estrat√©gia de Avalia√ß√µes',desc:`10 avalia√ß√µes com 5 estrelas te colocam no topo das buscas locais. Envie o link direto para cada cliente atendido.`,keywords:['google avalia√ß√µes','google meu neg√≥cio nota','como subir no google']},
    {icon:'üì±',title:'Instagram como SEO',desc:`Use palavras-chave no nome de usu√°rio e bio. "Dr. Jo√£o | ${profLabel(p)} ${city}" aparece nas buscas do Instagram e do Google.`,keywords:[`${p} ${city}`,`${area} ${city}`,`profissional ${city}`]},
  ];
  document.getElementById('seoCards').innerHTML=cards.map(c=>`
    <div class="seo-card">
      <div class="seo-card-icon">${c.icon}</div>
      <div class="seo-card-title">${c.title}</div>
      <div class="seo-card-desc">${c.desc}</div>
      <div class="seo-keywords">${c.keywords.map(k=>`<span class="seo-kw">${k}</span>`).join('')}</div>
    </div>`).join('');
}

// ‚îÄ‚îÄ TRENDS ‚îÄ‚îÄ
function buildTrends(){
  const trends=[
    {rank:1,name:'Carross√©is "5 erros que voc√™ comete ao..."',desc:'Formato mais salvo no Instagram. Geram 4x mais seguidores qualificados.',heat:'üî•üî•üî• M√°ximo'},
    {rank:2,name:'Reels educativos de 30-60 segundos',desc:'O algoritmo prioriza v√≠deos curtos. 1 d√∫vida respondida em 45s √© ouro.',heat:'üî•üî•üî• M√°ximo'},
    {rank:3,name:'Bastidores da profiss√£o',desc:'Humaniza o profissional e gera conex√£o real com o p√∫blico.',heat:'üî•üî• Alto'},
    {rank:4,name:'Posts de "mito vs realidade"',desc:'Geram debate, engajamento e posicionam autoridade ao mesmo tempo.',heat:'üî•üî• Alto'},
    {rank:5,name:'Depoimentos em formato de hist√≥ria',desc:'Transforma√ß√µes de clientes t√™m alt√≠ssima taxa de salvamento.',heat:'üî•üî• Alto'},
    {rank:6,name:'SEO no Instagram (bio + nome)',desc:'Profissionais que otimizam o perfil para busca ganham 30% mais alcance.',heat:'üî• Crescendo'},
    {rank:7,name:'Lives de perguntas e respostas',desc:'Posiciona autoridade em tempo real e pode virar posts depois.',heat:'üî• Crescendo'},
  ];
  document.getElementById('trendsList').innerHTML=trends.map(t=>`
    <div class="trend-item">
      <div class="trend-rank">${String(t.rank).padStart(2,'0')}</div>
      <div class="trend-info"><div class="trend-name">${t.name}</div><div class="trend-desc">${t.desc}</div></div>
      <div class="trend-heat">${t.heat}</div>
    </div>`).join('');
}

// ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ
function showToast(msg,isErr){
  const t=document.getElementById('toast');
  document.getElementById('toastMsg').textContent=msg;
  t.style.borderColor=isErr?'rgba(252,92,125,0.3)':'rgba(92,248,212,0.3)';
  t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3000);
}
</script>
</body>
</html>
